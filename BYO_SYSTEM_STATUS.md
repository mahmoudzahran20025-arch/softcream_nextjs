# ๐ฏ BYO System - ุงููุถุน ุงูุญุงูู ูุงูุฎุทูุงุช ุงููุชุจููุฉ

> ุขุฎุฑ ุชุญุฏูุซ: ุชู ุฅุตูุงุญ ุญุณุงุจ ุงูุณุนุฑ ูู ุงูุณูุฉ โ

## ๐ ููุฎุต ุงููุธุงู ุงูุญุงูู

### โ ูุง ุชู ุฅูุฌุงุฒู:

#### 1. Database Schema
- โ ุฌุฏุงูู `option_groups`, `options`, `product_options`, `order_item_selections`
- โ ุฌุฏุงูู `container_types`, `product_sizes`, `product_containers`
- โ ุฃุนูุฏุฉ ุงูุชุบุฐูุฉ ูู ุฌุฏูู `options` (calories, protein, carbs, sugar, fat, fiber)
- โ ุฅุนุงุฏุฉ ููููุฉ ุงูููุชุฌุงุช (byo_ice_cream, milkshake, preset_ice_cream, dessert)

#### 2. Backend API
- โ `/products/:id/configuration` - ุฅุฑุฌุงุน ูู ุฅุนุฏุงุฏุงุช ุงูููุชุฌ
- โ `/products/:id/customization-rules` - ููุงุนุฏ ุงูุชุฎุตูุต
- โ `/products/:id/containers` ู `/products/:id/sizes`
- โ ุญุณุงุจ ุงูุณุนุฑ ูู ุงูู Backend

#### 3. Frontend Components
- โ `ProductTemplateRenderer` - ุนุฑุถ ุฏููุงูููู ุญุณุจ ููุน ุงูููุชุฌ
- โ `ContainerSelector` - ุงุฎุชูุงุฑ ููุจ/ููู
- โ `SizeSelector` - ุงุฎุชูุงุฑ ุงูููุงุณ
- โ `CustomizationSelector` - ุงุฎุชูุงุฑ ุงููููุงุช/ุงูุตูุตุงุช/ุงูุฅุถุงูุงุช
- โ `NutritionInfo` - ุนุฑุถ ุงูุชุบุฐูุฉ ุงูุฏููุงูููู

#### 4. Hooks
- โ `useProductConfiguration` - ุฅุฏุงุฑุฉ ุญุงูุฉ ุงูููุชุฌ
- โ `useCustomization` - ุฅุฏุงุฑุฉ ุงูุชุฎุตูุตุงุช

---

## โ๏ธ ุงููุดุงูู ุงููุญุชููุฉ ูู ุญุณุงุจ ุงูุณุนุฑ:

### 1. ูุดููุฉ ุงูุณุนุฑ = 0 ูู ุงูู Hero
```
ุงูููุชุฌ: BYO Cup
ุงูุณุนุฑ ุงูุฃุณุงุณู ูู DB: 0 ุฌ.ู
ุงูุณุนุฑ ุงููุนุฑูุถ ูู Hero: 0 ุฌ.ู โ (ูุฌุจ ุฃู ูุนุฑุถ ุณุนุฑ ุงูููุงุณ ุงูุงูุชุฑุงุถู)
```

**ุงูุณุจุจ:** `ProductHeader` ูุนุฑุถ `product.price` ูุจุงุดุฑุฉ

**ุงูุญู:** ุชุญุฏูุซ `ProductHeader` ููุนุฑุถ ุงูุณุนุฑ ูู `productConfig.totalPrice`

### 2. ูุดููุฉ ุงูุณุนุฑ ูู ุงูุณูุฉ
```
ุนูุฏ ุงูุฅุถุงูุฉ ููุณูุฉ:
- ูุชู ุฅุฑุณุงู: productId + selections
- ูุง ูุชู ุฅุฑุณุงู: ุงูุณุนุฑ ุงููุญุณูุจ โ

ูู ุงูุณูุฉ:
- ูุชู ุญุณุงุจ ุงูุณุนุฑ ูู: product.price (0) + options prices
- ุงููุดููุฉ: ุณุนุฑ ุงูููุงุณ ูุง ููุญุณุจ โ
```

**ุงูุณุจุจ:** `CartProvider.getCartTotal()` ูุง ูุนุฑู ุณุนุฑ ุงูููุงุณ

**ุงูุญู:** ุฅุฑุณุงู ุณุนุฑ ุงูููุงุณ ูุน ุงูู selections ุฃู ุญุณุงุจู ูู ุงูู Cart

### 3. ูุดููุฉ ุงูุชุบุฐูุฉ
```
ุงูุชุบุฐูุฉ ุงูุฏููุงููููุฉ ุชุนูู โ
ููู: ุงูููู ุงูุบุฐุงุฆูุฉ ูููููุงุช ูุฏ ุชููู 0 ูู ุงูู DB
```

**ุงูุญู:** ุชุญุฏูุซ seed data ุจููู ุบุฐุงุฆูุฉ ุญููููุฉ

---

## ๐ง ุงูุฅุตูุงุญุงุช ุงููุทููุจุฉ:

### ุฅุตูุงุญ 1: ุนุฑุถ ุงูุณุนุฑ ูู ุงูู Hero
```tsx
// ProductHeader.tsx
// ุจุฏูุงู ูู:
<span>{product.price} ุฌ.ู</span>

// ูุฌุจ:
<span>{displayPrice || product.price} ุฌ.ู</span>
// ุญูุซ displayPrice ูุฃุชู ูู productConfig.totalPrice
```

### ุฅุตูุงุญ 2: ุญุณุงุจ ุงูุณุนุฑ ูู ุงูุณูุฉ
```tsx
// CartProvider.tsx - getCartTotal()
// ูุฌุจ ุฅุถุงูุฉ:
if (item.selections?._size) {
  // ุงุณุชุฎุฑุงุฌ ุณุนุฑ ุงูููุงุณ ูู ุงูู selections
  const sizePrice = item.selections._size[2] // ุฅุฐุง ุฃุถููุง ุงูุณุนุฑ
  itemPrice += parseFloat(sizePrice) || 0
}
```

### ุฅุตูุงุญ 3: ุฅุฑุณุงู ุงูุณุนุฑ ูุน ุงูู selections
```tsx
// ProductModal - handleAddToCart()
if (productConfig.selectedSize) {
  selectionsWithConfig['_size'] = [
    productConfig.selectedSize,
    productConfig.sizeObj?.name || '',
    String(productConfig.sizeObj?.priceModifier || 0) // โ ุฅุถุงูุฉ ุงูุณุนุฑ
  ]
}
```

---

## ๐ ุฎุทุฉ ุงูุนูู ุงููุชุจููุฉ:

### Phase 1: ุฅุตูุงุญ ุงูุฃุณุนุงุฑ (ุฃููููุฉ ุนุงููุฉ)
1. [ ] ุชุญุฏูุซ `ProductHeader` ูุนุฑุถ ุงูุณุนุฑ ุงูุตุญูุญ
2. [x] ุชุญุฏูุซ `handleAddToCart` ูุฅุฑุณุงู ุณุนุฑ ุงูููุงุณ โ
3. [x] ุชุญุฏูุซ `CartProvider.getCartTotal` ูุญุณุงุจ ุณุนุฑ ุงูููุงุณ โ
4. [x] ุชุญุฏูุซ `CartItem` ูุนุฑุถ ุชูุงุตูู ุงูุณุนุฑ โ

### Phase 2: ุชุญุณูู ุงูุชุบุฐูุฉ
1. [ ] ุชุญุฏูุซ seed data ุจููู ุบุฐุงุฆูุฉ ุญููููุฉ ูููููุงุช
2. [ ] ุฅุถุงูุฉ Energy Level (ูุณุชูู ุงูุทุงูุฉ)
3. [ ] ุนุฑุถ ููุฎุต ุงูุชุบุฐูุฉ ูู ุงูุณูุฉ

### Phase 3: ุชุญุณูู UX
1. [ ] ุชุญุณูู ุนุฑุถ ุงูููุงุณุงุช (ุตูุฑ/ุฃููููุงุช)
2. [ ] ุฅุถุงูุฉ animations ููุชุบุฐูุฉ
3. [ ] ุชุญุณูู ุงูู validation messages

### Phase 4: Landing Page
1. [ ] ุตูุญุฉ BYO ูุฎุตุตุฉ
2. [ ] Wizard ููุชุฎุตูุต ุฎุทูุฉ ุจุฎุทูุฉ
3. [ ] Preview ููููุชุฌ ุงูููุงุฆู

---

## ๐งฎ ููููุฉ ุญุณุงุจ ุงูุณุนุฑ ุงูุตุญูุญ:

### ููู BYO Ice Cream:
```
ุงูุณุนุฑ ุงูููุงุฆู = 
  basePrice (0) 
  + containerPrice (0 ููููุจุ 5 ููููู ุงูุดููููุงุชุฉ)
  + sizePrice (30/40/50)
  + flavorsPrice (0 - ูุฌุงูู)
  + saucesPrice (5 ููู ุตูุต)
  + toppingsPrice (5-10 ููู ุฅุถุงูุฉ)
```

### ููู Milkshake:
```
ุงูุณุนุฑ ุงูููุงุฆู = 
  basePrice (30-35 ุญุณุจ ุงููููุฉ)
  + sizePrice (0 ููุนุงุฏูุ +10 ูููุจูุฑ)
  + extrasPrice (5-15 ููู ุฅุถุงูุฉ)
```

### ููู Dessert:
```
ุงูุณุนุฑ ุงูููุงุฆู = 
  basePrice (35-45 ุญุณุจ ุงูุญููู)
  + iceCreamPrice (20 ููู ูููุฉ)
  + saucesPrice (5 ููู ุตูุต)
```

---

## ๐ฏ ุงูุฃููููุงุช:

1. **ุนุงุฌู:** ุฅุตูุงุญ ุญุณุงุจ ุงูุณุนุฑ ูู ุงูุณูุฉ
2. **ููู:** ุนุฑุถ ุงูุณุนุฑ ุงูุตุญูุญ ูู ุงูู Hero
3. **ูุชูุณุท:** ุชุญุณูู ุงูุชุบุฐูุฉ
4. **ูุงุญูุงู:** Landing Page

---

## ๐ก ููุงุญุธุงุช:

- ุงูุณุนุฑ ููุญุณุจ ูู ุงูู Frontend ููุนุฑุถ ููุท
- ุงูุณุนุฑ ุงูููุงุฆู ููุญุณุจ ูู ุงูู Backend ุนูุฏ ุงูู Checkout
- ูุฐุง ูุถูู ุงูุฃูุงู ููููุน ุงูุชูุงุนุจ ุจุงูุฃุณุนุงุฑ
