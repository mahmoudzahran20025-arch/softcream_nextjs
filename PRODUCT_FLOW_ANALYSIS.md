# ğŸ“Š ØªØ­Ù„ÙŠÙ„ ØªØ¯ÙÙ‚ Ø§Ù„Ù…Ù†ØªØ¬ ÙˆØ§Ù„ØªØºØ°ÙŠØ© - Soft Cream

## ğŸ—ºï¸ Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù…Ù„ÙØ§Øª ÙˆØ§Ù„Ø£Ø¯ÙˆØ§Ø±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           PRODUCT DISPLAY FLOW                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  ğŸ“± UI COMPONENTS (Ø¹Ø±Ø¶ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…)                                                 â”‚
â”‚  â”œâ”€â”€ ProductCard.tsx (ui/)                                                       â”‚
â”‚  â”‚   â””â”€â”€ ÙƒØ§Ø±Øª Ø§Ù„Ù…Ù†ØªØ¬ ÙÙŠ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©                                          â”‚
â”‚  â”‚   â””â”€â”€ ÙŠØ¹Ø±Ø¶: ØµÙˆØ±Ø©ØŒ Ø§Ø³Ù…ØŒ Ø³Ø¹Ø±ØŒ Ø³Ø¹Ø±Ø§ØªØŒ Ø·Ø§Ù‚Ø©                                       â”‚
â”‚  â”‚   â””â”€â”€ ÙŠØ³ØªØ®Ø¯Ù…: useRotatingText, QuantitySelector, PriceDisplay                â”‚
â”‚  â”‚                                                                               â”‚
â”‚  â”œâ”€â”€ NutritionCard.tsx (ui/)                                                     â”‚
â”‚  â”‚   â””â”€â”€ âš ï¸ ØºÙŠØ± Ù…Ø³ØªØ®Ø¯Ù… Ø­Ø§Ù„ÙŠØ§Ù‹ - ÙŠÙ…ÙƒÙ† Ø­Ø°ÙÙ‡                                        â”‚
â”‚  â”‚   â””â”€â”€ ÙƒØ§Ù† ÙŠØ¹Ø±Ø¶ Ù…Ù„Ø®Øµ Ø§Ù„ØªØºØ°ÙŠØ©                                                   â”‚
â”‚  â”‚                                                                               â”‚
â”‚  â””â”€â”€ NutritionSummary.tsx (ui/)                                                  â”‚
â”‚      â””â”€â”€ âš ï¸ Modal Ù…Ù†ÙØµÙ„ Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªØºØ°ÙŠØ© + Ø§Ù„Ø³Ù„Ø©                                     â”‚
â”‚      â””â”€â”€ ÙŠØ­Ø³Ø¨ Ø§Ù„ØªØºØ°ÙŠØ© Ù…Ù† productsMap (Ø¨Ø¯ÙˆÙ† customization!)                       â”‚
â”‚      â””â”€â”€ ğŸ”´ Ù…Ø´ÙƒÙ„Ø©: Ù„Ø§ ÙŠØ¯Ø¹Ù… BYO nutrition                                         â”‚
â”‚                                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  ğŸ¯ PRODUCT MODAL (ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬)                                                â”‚
â”‚  â”œâ”€â”€ index.tsx                                                                   â”‚
â”‚  â”‚   â””â”€â”€ Ø§Ù„Ù…Ù†Ø³Ù‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ - ÙŠØ¬Ù…Ø¹ ÙƒÙ„ Ø§Ù„Ù€ hooks ÙˆØ§Ù„Ù€ components                      â”‚
â”‚  â”‚   â””â”€â”€ ÙŠØ³ØªØ®Ø¯Ù…: useProductLogic, useCustomization, useProductConfiguration     â”‚
â”‚  â”‚                                                                               â”‚
â”‚  â”œâ”€â”€ NutritionInfo.tsx                                                           â”‚
â”‚  â”‚   â””â”€â”€ âœ… ÙŠØ¹Ø±Ø¶ Ø§Ù„ØªØºØ°ÙŠØ© Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© (base + customization)                      â”‚
â”‚  â”‚   â””â”€â”€ ÙŠØ³ØªÙ‚Ø¨Ù„ customizationNutrition Ù…Ù† Ø§Ù„Ù€ parent                             â”‚
â”‚  â”‚                                                                               â”‚
â”‚  â”œâ”€â”€ useCustomization.ts                                                         â”‚
â”‚  â”‚   â””â”€â”€ âœ… ÙŠØ­Ø³Ø¨ Ø§Ù„ØªØºØ°ÙŠØ© Ù…Ù† Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©                                    â”‚
â”‚  â”‚   â””â”€â”€ ÙŠØ±Ø¬Ø¹: customizationNutrition, energyType, energyScore                  â”‚
â”‚  â”‚                                                                               â”‚
â”‚  â”œâ”€â”€ ContainerSelector.tsx                                                       â”‚
â”‚  â”‚   â””â”€â”€ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø­Ø§ÙˆÙŠØ© (ÙƒÙˆØ¨/ÙƒÙˆÙ†)                                                â”‚
â”‚  â”‚                                                                               â”‚
â”‚  â”œâ”€â”€ SizeSelector.tsx                                                            â”‚
â”‚  â”‚   â””â”€â”€ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù‚Ø§Ø³ (ØµØºÙŠØ±/ÙˆØ³Ø·/ÙƒØ¨ÙŠØ±)                                           â”‚
â”‚  â”‚                                                                               â”‚
â”‚  â”œâ”€â”€ CustomizationSelector.tsx                                                   â”‚
â”‚  â”‚   â””â”€â”€ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù†ÙƒÙ‡Ø§Øª/Ø§Ù„ØµÙˆØµØ§Øª/Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª                                         â”‚
â”‚  â”‚                                                                               â”‚
â”‚  â”œâ”€â”€ CustomizationSummary.tsx                                                    â”‚
â”‚  â”‚   â””â”€â”€ Ù…Ù„Ø®Øµ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©                                                 â”‚
â”‚  â”‚                                                                               â”‚
â”‚  â”œâ”€â”€ ActionFooter.tsx                                                            â”‚
â”‚  â”‚   â””â”€â”€ Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø© + Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ                                        â”‚
â”‚  â”‚                                                                               â”‚
â”‚  â””â”€â”€ templates/                                                                  â”‚
â”‚      â””â”€â”€ ProductTemplateRenderer.tsx                                             â”‚
â”‚      â””â”€â”€ ÙŠØ­Ø¯Ø¯ Ø£ÙŠ template ÙŠÙØ¹Ø±Ø¶ Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬                                   â”‚
â”‚                                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  ğŸ§® CALCULATION UTILITIES (Ø­Ø³Ø§Ø¨Ø§Øª)                                               â”‚
â”‚  â”œâ”€â”€ lib/utils/nutritionCalculator.ts                                            â”‚
â”‚  â”‚   â””â”€â”€ âœ… Single source of truth Ù„Ù„ØªØºØ°ÙŠØ©                                       â”‚
â”‚  â”‚   â””â”€â”€ Functions: addNutrition, multiplyNutrition, calculateTotalNutrition    â”‚
â”‚  â”‚   â””â”€â”€ âš ï¸ ØºÙŠØ± Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ - useProductConfiguration ÙŠÙƒØ±Ø± Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª          â”‚
â”‚  â”‚                                                                               â”‚
â”‚  â””â”€â”€ lib/utils/priceCalculator.ts                                                â”‚
â”‚      â””â”€â”€ âœ… Single source of truth Ù„Ù„Ø£Ø³Ø¹Ø§Ø±                                       â”‚
â”‚      â””â”€â”€ Functions: calculateProductPrice, calculateCartItemPrice               â”‚
â”‚      â””â”€â”€ âš ï¸ ØºÙŠØ± Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ - CartProvider ÙŠÙƒØ±Ø± Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª                      â”‚
â”‚                                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  ğŸ›’ CART SYSTEM (Ø§Ù„Ø³Ù„Ø©)                                                          â”‚
â”‚  â”œâ”€â”€ providers/CartProvider.tsx                                                  â”‚
â”‚  â”‚   â””â”€â”€ Ø¥Ø¯Ø§Ø±Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ø³Ù„Ø©                                                        â”‚
â”‚  â”‚   â””â”€â”€ getCartTotal() - ÙŠØ­Ø³Ø¨ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ                                    â”‚
â”‚  â”‚   â””â”€â”€ âœ… ÙŠØ¯Ø¹Ù… _calculatedPrice, _container, _size                             â”‚
â”‚  â”‚   â””â”€â”€ âš ï¸ ÙŠÙƒØ±Ø± Ø­Ø³Ø§Ø¨Ø§Øª priceCalculator.ts                                       â”‚
â”‚  â”‚                                                                               â”‚
â”‚  â””â”€â”€ hooks/useAddToCart.ts                                                       â”‚
â”‚      â””â”€â”€ âœ… Unified hook Ù„Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©                                            â”‚
â”‚      â””â”€â”€ ÙŠØ¯Ø¹Ù… 3 flows: config, customization, legacy                            â”‚
â”‚                                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  ğŸ”§ CONFIGURATION HOOKS                                                          â”‚
â”‚  â”œâ”€â”€ hooks/useProductConfiguration.ts                                            â”‚
â”‚  â”‚   â””â”€â”€ âœ… ÙŠØ¬Ù„Ø¨ config Ù…Ù† API                                                   â”‚
â”‚  â”‚   â””â”€â”€ âœ… ÙŠØ­Ø³Ø¨ totalNutrition (container + customization Ã— size)               â”‚
â”‚  â”‚   â””â”€â”€ âœ… ÙŠØ­Ø³Ø¨ totalPrice                                                      â”‚
â”‚  â”‚   â””â”€â”€ âš ï¸ ÙŠÙƒØ±Ø± Ø­Ø³Ø§Ø¨Ø§Øª nutritionCalculator.ts                                   â”‚
â”‚  â”‚                                                                               â”‚
â”‚  â””â”€â”€ ProductModal/useCustomization.ts                                            â”‚
â”‚      â””â”€â”€ âš ï¸ ØªÙƒØ±Ø§Ø± Ù…Ø¹ useProductConfiguration!                                    â”‚
â”‚      â””â”€â”€ ÙƒÙ„Ø§Ù‡Ù…Ø§ ÙŠØ­Ø³Ø¨ customizationNutrition                                      â”‚
â”‚      â””â”€â”€ ÙƒÙ„Ø§Ù‡Ù…Ø§ ÙŠØ­Ø³Ø¨ energyData                                                  â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”´ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…ÙƒØªØ´ÙØ©

### 1. ØªÙƒØ±Ø§Ø± Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„ØªØºØ°ÙŠØ©
```
useProductConfiguration.ts  â†â†’  useCustomization.ts
â”œâ”€â”€ ÙƒÙ„Ø§Ù‡Ù…Ø§ ÙŠØ­Ø³Ø¨ customizationNutrition
â”œâ”€â”€ ÙƒÙ„Ø§Ù‡Ù…Ø§ ÙŠØ­Ø³Ø¨ energyType/energyScore
â””â”€â”€ ÙƒÙ„Ø§Ù‡Ù…Ø§ ÙŠØ³ØªØ®Ø¯Ù… Ù†ÙØ³ Ø§Ù„Ù…Ù†Ø·Ù‚

Ø§Ù„Ø­Ù„: Ø§Ø³ØªØ®Ø¯Ø§Ù… nutritionCalculator.ts ÙƒÙ€ single source
```

### 2. ØªÙƒØ±Ø§Ø± Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø£Ø³Ø¹Ø§Ø±
```
CartProvider.tsx  â†â†’  priceCalculator.ts
â”œâ”€â”€ getCartTotal() ÙŠÙƒØ±Ø± calculateCartItemPrice()
â””â”€â”€ Ù†ÙØ³ Ø§Ù„Ù…Ù†Ø·Ù‚ Ù…ÙƒØªÙˆØ¨ Ù…Ø±ØªÙŠÙ†

Ø§Ù„Ø­Ù„: CartProvider ÙŠØ³ØªØ®Ø¯Ù… priceCalculator
```

### 3. NutritionSummary.tsx Ù„Ø§ ÙŠØ¯Ø¹Ù… BYO
```
Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:
- ÙŠØ­Ø³Ø¨ Ø§Ù„ØªØºØ°ÙŠØ© Ù…Ù† productsMap ÙÙ‚Ø·
- Ù„Ø§ ÙŠØ£Ø®Ø° ÙÙŠ Ø§Ù„Ø§Ø¹ØªØ¨Ø§Ø± selections (container, size, customizations)

Ø§Ù„Ø­Ù„: ØªØ­Ø¯ÙŠØ« Ù„ÙŠØ³ØªØ®Ø¯Ù… item.selections Ù„Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„ØµØ­ÙŠØ­
```

### 4. NutritionCard.tsx ØºÙŠØ± Ù…Ø³ØªØ®Ø¯Ù…
```
Ø§Ù„Ù…Ù„Ù Ù…ÙˆØ¬ÙˆØ¯ Ù„ÙƒÙ† Ù„Ø§ ÙŠÙØ³ØªÙˆØ±Ø¯ ÙÙŠ Ø£ÙŠ Ù…ÙƒØ§Ù†
ÙŠÙ…ÙƒÙ† Ø­Ø°ÙÙ‡ Ø£Ùˆ Ø¯Ù…Ø¬Ù‡ Ù…Ø¹ NutritionInfo
```

### 5. useCustomization vs useProductConfiguration
```
ProductModal ÙŠØ³ØªØ®Ø¯Ù… ÙƒÙ„Ø§Ù‡Ù…Ø§:
- useCustomization: Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ®ØµÙŠØµ (BYO)
- useProductConfiguration: Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª Ù…Ø¹ containers/sizes

Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: ØªØ¯Ø§Ø®Ù„ ÙÙŠ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù
Ø§Ù„Ø­Ù„: Ø¯Ù…Ø¬Ù‡Ù…Ø§ Ø£Ùˆ ØªÙˆØ¶ÙŠØ­ Ø§Ù„ÙØµÙ„
```

---

## ğŸ“Š ØªØ¯ÙÙ‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATA FLOW DIAGRAM                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  API                                                             â”‚
â”‚   â”‚                                                              â”‚
â”‚   â”œâ”€â”€â†’ getProductConfiguration()                                 â”‚
â”‚   â”‚         â”‚                                                    â”‚
â”‚   â”‚         â–¼                                                    â”‚
â”‚   â”‚    useProductConfiguration                                   â”‚
â”‚   â”‚         â”‚                                                    â”‚
â”‚   â”‚         â”œâ”€â”€â†’ containers, sizes                               â”‚
â”‚   â”‚         â”œâ”€â”€â†’ customizationRules                              â”‚
â”‚   â”‚         â”œâ”€â”€â†’ totalPrice (calculated)                         â”‚
â”‚   â”‚         â””â”€â”€â†’ totalNutrition (calculated)                     â”‚
â”‚   â”‚                                                              â”‚
â”‚   â””â”€â”€â†’ getCustomizationRules()                                   â”‚
â”‚             â”‚                                                    â”‚
â”‚             â–¼                                                    â”‚
â”‚        useCustomization                                          â”‚
â”‚             â”‚                                                    â”‚
â”‚             â”œâ”€â”€â†’ customizationRules                              â”‚
â”‚             â”œâ”€â”€â†’ totalPrice (calculated)                         â”‚
â”‚             â””â”€â”€â†’ customizationNutrition (calculated)             â”‚
â”‚                                                                  â”‚
â”‚                         â”‚                                        â”‚
â”‚                         â–¼                                        â”‚
â”‚                  ProductModal                                    â”‚
â”‚                         â”‚                                        â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚         â–¼               â–¼               â–¼                        â”‚
â”‚   NutritionInfo   ActionFooter   useAddToCart                   â”‚
â”‚         â”‚               â”‚               â”‚                        â”‚
â”‚         â”‚               â”‚               â–¼                        â”‚
â”‚         â”‚               â”‚         CartProvider                   â”‚
â”‚         â”‚               â”‚               â”‚                        â”‚
â”‚         â”‚               â”‚               â–¼                        â”‚
â”‚         â”‚               â”‚         getCartTotal()                 â”‚
â”‚         â”‚               â”‚               â”‚                        â”‚
â”‚         â–¼               â–¼               â–¼                        â”‚
â”‚      Display         Display        Storage                      â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… Ø§Ù„ØªÙˆØµÙŠØ§Øª

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: ØªÙ†Ø¸ÙŠÙ Ø§Ù„ØªÙƒØ±Ø§Ø± (Ø³Ø±ÙŠØ¹)

1. **Ø­Ø°Ù NutritionCard.tsx** - ØºÙŠØ± Ù…Ø³ØªØ®Ø¯Ù…

2. **ØªØ­Ø¯ÙŠØ« CartProvider** Ù„ÙŠØ³ØªØ®Ø¯Ù… priceCalculator:
```typescript
import { calculateCartItemPrice } from '@/lib/utils/priceCalculator'

// ÙÙŠ getCartTotal:
return items.reduce((total, item) => {
  return total + calculateCartItemPrice(...)
}, 0)
```

3. **ØªØ­Ø¯ÙŠØ« useProductConfiguration** Ù„ÙŠØ³ØªØ®Ø¯Ù… nutritionCalculator:
```typescript
import { calculateTotalNutrition } from '@/lib/utils/nutritionCalculator'

// Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„ÙŠØ¯ÙˆÙŠ
const totalNutrition = calculateTotalNutrition({
  containerNutrition: containerObj?.nutrition,
  customizationNutrition: customizationData.nutrition,
  sizeMultiplier: sizeObj?.nutritionMultiplier
})
```

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ù€ Hooks (Ù…ØªÙˆØ³Ø·)

4. **Ø¯Ù…Ø¬ useCustomization ÙÙŠ useProductConfiguration**:
```
useProductConfiguration ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ù€ hook Ø§Ù„ÙˆØ­ÙŠØ¯
- Ø¥Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù‡ containers/sizes â†’ ÙŠØ³ØªØ®Ø¯Ù… config API
- Ø¥Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ customizable ÙÙ‚Ø· â†’ ÙŠØ³ØªØ®Ø¯Ù… customization rules Ù…Ù† config
```

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: Ø¥ØµÙ„Ø§Ø­ NutritionSummary (Ù…Ù‡Ù…)

5. **ØªØ­Ø¯ÙŠØ« NutritionSummary** Ù„Ø¯Ø¹Ù… BYO:
```typescript
// Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù†:
const calories = product?.calories || 0

// ÙŠØ¬Ø¨:
const calories = item.selections?._nutrition 
  ? parseFloat(item.selections._nutrition[0]) 
  : (product?.calories || 0)
```

---

## ğŸ“ Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ù„ÙØ§Øª

| Ø§Ù„Ù…Ù„Ù | Ø§Ù„Ø­Ø§Ù„Ø© | Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„Ù…Ù‚ØªØ±Ø­ |
|-------|--------|-----------------|
| `ui/ProductCard.tsx` | âœ… ÙŠØ¹Ù…Ù„ | Ù„Ø§ ØªØºÙŠÙŠØ± |
| `ui/NutritionCard.tsx` | âš ï¸ ØºÙŠØ± Ù…Ø³ØªØ®Ø¯Ù… | Ø­Ø°Ù |
| `ui/NutritionSummary.tsx` | ğŸ”´ Ù„Ø§ ÙŠØ¯Ø¹Ù… BYO | ØªØ­Ø¯ÙŠØ« |
| `lib/utils/nutritionCalculator.ts` | âœ… Ø¬ÙŠØ¯ | Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ Ø£ÙƒØ«Ø± |
| `lib/utils/priceCalculator.ts` | âœ… Ø¬ÙŠØ¯ | Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ ÙÙŠ CartProvider |
| `providers/CartProvider.tsx` | âš ï¸ ØªÙƒØ±Ø§Ø± | Ø§Ø³ØªØ®Ø¯Ø§Ù… priceCalculator |
| `hooks/useProductConfiguration.ts` | âš ï¸ ØªÙƒØ±Ø§Ø± | Ø§Ø³ØªØ®Ø¯Ø§Ù… nutritionCalculator |
| `ProductModal/useCustomization.ts` | âš ï¸ ØªÙƒØ±Ø§Ø± | Ø¯Ù…Ø¬ Ù…Ø¹ useProductConfiguration |
| `ProductModal/NutritionInfo.tsx` | âœ… ÙŠØ¹Ù…Ù„ | Ù„Ø§ ØªØºÙŠÙŠØ± |
| `ProductModal/index.tsx` | âœ… ÙŠØ¹Ù…Ù„ | Ù„Ø§ ØªØºÙŠÙŠØ± |
| `hooks/useAddToCart.ts` | âœ… Ù…Ù…ØªØ§Ø² | Ù„Ø§ ØªØºÙŠÙŠØ± |

---

## ğŸ¯ Ø§Ù„Ø®Ù„Ø§ØµØ©

Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ Ù„ÙƒÙ† ÙÙŠÙ‡:
1. **ØªÙƒØ±Ø§Ø± ÙÙŠ Ø§Ù„ÙƒÙˆØ¯** - Ù†ÙØ³ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ÙÙŠ Ø£Ù…Ø§ÙƒÙ† Ù…ØªØ¹Ø¯Ø¯Ø©
2. **Ù…Ù„ÙØ§Øª ØºÙŠØ± Ù…Ø³ØªØ®Ø¯Ù…Ø©** - NutritionCard.tsx
3. **ÙØ¬ÙˆØ© ÙÙŠ NutritionSummary** - Ù„Ø§ ÙŠØ¯Ø¹Ù… BYO nutrition

**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:**
1. ğŸ”´ Ø¥ØµÙ„Ø§Ø­ NutritionSummary (ÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰ UX)
2. ğŸŸ¡ Ø­Ø°Ù NutritionCard.tsx (ØªÙ†Ø¸ÙŠÙ)
3. ğŸŸ¢ ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª (ØªØ­Ø³ÙŠÙ† Ø§Ù„ÙƒÙˆØ¯)
