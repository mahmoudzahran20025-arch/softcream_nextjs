# Requirements Document - Conditional Options System

## Introduction

ูุฐุง ุงููุณุชูุฏ ูุญุฏุฏ ูุชุทูุจุงุช ูุธุงู ุงูุฎูุงุฑุงุช ุงูุดุฑุทูุฉ (Conditional Options) ุงูุฐู ูุณูุญ ุจุฑุจุท ุงูุฎูุงุฑุงุช ุจุจุนุถูุง ุงูุจุนุถ. ูุซูุงู: ุนุฏุฏ ุงููููุงุช ุงููุณููุญ ูุนุชูุฏ ุนูู ุงูุญุฌู ุงููุฎุชุงุฑ.

### ุงูููุณูุฉ:
- **ุงููุฑููุฉ:** ุฃู ุฎูุงุฑ ูููู ุฃู ูุคุซุฑ ุนูู ุฎูุงุฑ ุขุฎุฑ
- **ุงูุจุณุงุทุฉ:** ููุงุนุฏ ูุงุถุญุฉ ูุณููุฉ ุงูููู
- **ุงูุชูุงูู:** ูุนูู ูุน ุงููุธุงู ุงูุญุงูู ุจุฏูู ูุณุฑ

## Glossary

- **Option Group**: ูุฌููุนุฉ ุฎูุงุฑุงุช (ูููุงุชุ ุฃุญุฌุงูุ ุตูุตุงุช...)
- **Conditional Rule**: ูุงุนุฏุฉ ุดุฑุทูุฉ ุชุฑุจุท ูุฌููุนุชูู
- **Dependent Group**: ุงููุฌููุนุฉ ุงูุชู ุชุชุฃุซุฑ ุจุงููุงุนุฏุฉ
- **Trigger Group**: ุงููุฌููุนุฉ ุงูุชู ุชููุนูู ุงููุงุนุฏุฉ
- **max_selections**: ุงูุญุฏ ุงูุฃูุตู ููุงุฎุชูุงุฑุงุช
- **min_selections**: ุงูุญุฏ ุงูุฃุฏูู ููุงุฎุชูุงุฑุงุช

## Requirements

### Requirement 1: ุชุนุฑูู ุงูููุงุนุฏ ุงูุดุฑุทูุฉ

**User Story:** ููุณุคููุ ุฃุฑูุฏ ุฑุจุท ุนุฏุฏ ุงููููุงุช ุงููุณููุญ ุจุงูุญุฌู ุงููุฎุชุงุฑุ ุญุชู ูุญุตู ุงูุนููู ุนูู ุชุฌุฑุจุฉ ููุทููุฉ.

#### Acceptance Criteria

1. WHEN ุงูุฃุฏูู ููุชุญ ุฅุนุฏุงุฏุงุช ูุฌููุนุฉ ุฎูุงุฑุงุช THEN ุงููุธุงู SHALL ูุนุฑุถ ุฎูุงุฑ "ููุงุนุฏ ุดุฑุทูุฉ"

2. WHEN ุงูุฃุฏูู ูุถูู ูุงุนุฏุฉ ุดุฑุทูุฉ THEN ุงููุธุงู SHALL ูุณูุญ ุจุชุญุฏูุฏ:
   - ุงููุฌููุนุฉ ุงููุคุซุฑุฉ (Trigger Group)
   - ุงูุฎูุงุฑ ุงููููุนููู (Trigger Option)
   - ุงููููุฉ ุงูุฌุฏูุฏุฉ ูู max_selections

3. WHEN ุงูุฃุฏูู ูุญูุธ ุงููุงุนุฏุฉ THEN ุงููุธุงู SHALL ูุญูุธูุง ูู ุฌุฏูู `conditional_rules`

4. WHEN ุงููุงุนุฏุฉ ุชุชุนุงุฑุถ ูุน ูุงุนุฏุฉ ุฃุฎุฑู THEN ุงููุธุงู SHALL ูุนุฑุถ ุชุญุฐูุฑ ููููุน ุงูุญูุธ

### Requirement 2: ุชุทุจูู ุงูููุงุนุฏ ูู ุงููุงุฌูุฉ

**User Story:** ูุนูููุ ุฃุฑูุฏ ุฃู ูุชุบูุฑ ุนุฏุฏ ุงููููุงุช ุงููุณููุญ ุชููุงุฆูุงู ุนูุฏ ุงุฎุชูุงุฑ ุญุฌู ูุฎุชูู.

#### Acceptance Criteria

1. WHEN ุงูุนููู ูุฎุชุงุฑ ุฎูุงุฑ ูู ุงููุฌููุนุฉ ุงููุคุซุฑุฉ THEN ุงููุธุงู SHALL:
   - ูุจุญุซ ุนู ุงูููุงุนุฏ ุงูุดุฑุทูุฉ ุงููุฑุชุจุทุฉ
   - ููุญุฏูุซ ุงูุญุฏูุฏ (min/max) ูููุฌููุนุงุช ุงููุชุฃุซุฑุฉ
   - ูุนุฑุถ ุฑุณุงูุฉ ุชูุถูุญูุฉ ููุนููู

2. WHEN ุงูุนููู ูุบูุฑ ุงุฎุชูุงุฑู THEN ุงููุธุงู SHALL:
   - ููุนูุฏ ุญุณุงุจ ุงูุญุฏูุฏ
   - ููุฒูู ุงูุงุฎุชูุงุฑุงุช ุงูุฒุงุฆุฏุฉ ุฅุฐุง ุชุฌุงูุฒุช ุงูุญุฏ ุงูุฌุฏูุฏ
   - ูุนุฑุถ ุฑุณุงูุฉ ุชุฃููุฏ

3. WHEN ุงูุนููู ูุฎุชุงุฑ ุญุฌู ูุจูุฑ THEN ุงููุธุงู SHALL ูุณูุญ ุจูููุงุช ุฃูุซุฑ (ุญุณุจ ุงููุงุนุฏุฉ)

4. WHEN ุงูุนููู ูุฑุฌุน ูุญุฌู ุตุบูุฑ THEN ุงููุธุงู SHALL ููููู ุงููููุงุช ุงููุณููุญุฉ

### Requirement 3: ุงูุชุญูู ูู ุงูุตุญุฉ

**User Story:** ููุธุงูุ ุฃุฑูุฏ ุงูุชุฃูุฏ ูู ุฃู ุงุฎุชูุงุฑุงุช ุงูุนููู ุตุญูุญุฉ ูุจู ุฅุถุงูุชูุง ููุณูุฉ.

#### Acceptance Criteria

1. WHEN ุงูุนููู ูุญุงูู ุฅุถุงูุฉ ููุณูุฉ THEN ุงููุธุงู SHALL:
   - ูุชุญูู ูู ุฌููุน ุงูููุงุนุฏ ุงูุดุฑุทูุฉ
   - ูุชุฃูุฏ ูู ุฃู ุงูุงุฎุชูุงุฑุงุช ุถูู ุงูุญุฏูุฏ ุงููุณููุญุฉ
   - ูุนุฑุถ ุฃุฎุทุงุก ูุงุถุญุฉ ุฅุฐุง ููุฌุฏุช ูุดุงูู

2. WHEN ุงูุงุฎุชูุงุฑุงุช ุชุชุฌุงูุฒ ุงูุญุฏ ุงูุฌุฏูุฏ THEN ุงููุธุงู SHALL:
   - ูููุน ุงูุฅุถุงูุฉ ููุณูุฉ
   - ูุนุฑุถ ุฑุณุงูุฉ: "ูุฑุฌู ุชูููู ุนุฏุฏ ุงููููุงุช ุฅูู X"

3. WHEN ุฌููุน ุงูุงุฎุชูุงุฑุงุช ุตุญูุญุฉ THEN ุงููุธุงู SHALL ูุณูุญ ุจุงูุฅุถุงูุฉ ููุณูุฉ

### Requirement 4: ุนุฑุถ ุงูููุงุนุฏ ููุนููู

**User Story:** ูุนูููุ ุฃุฑูุฏ ููู ููุงุฐุง ุชุบูุฑ ุนุฏุฏ ุงูุฎูุงุฑุงุช ุงููุณููุญ.

#### Acceptance Criteria

1. WHEN ุชุชุบูุฑ ุงูุญุฏูุฏ ุจุณุจุจ ูุงุนุฏุฉ ุดุฑุทูุฉ THEN ุงููุธุงู SHALL ูุนุฑุถ:
   - ุฑุณุงูุฉ ุชูุถูุญูุฉ: "ุงูุญุฌู ุงููุจูุฑ ูุณูุญ ุจูููุชูู!"
   - ุชูููุฒ ุจุตุฑู ููุชุบููุฑ

2. WHEN ุงูุนููู ูุญูู ููู ุงูุญุฏ THEN ุงููุธุงู SHALL ูุนุฑุถ tooltip ูุดุฑุญ ุงูุณุจุจ

3. WHEN ุงูุนููู ูุฎุชุงุฑ ุฎูุงุฑุงุช ุฒุงุฆุฏุฉ THEN ุงููุธุงู SHALL:
   - ููุนุทูู ุงูุฎูุงุฑุงุช ุงูุฅุถุงููุฉ
   - ูุนุฑุถ ุฑุณุงูุฉ: "ูุตูุช ููุญุฏ ุงูุฃูุตู"

### Requirement 5: ุฅุฏุงุฑุฉ ุงูููุงุนุฏ ูู ุงูุฃุฏูู

**User Story:** ููุณุคููุ ุฃุฑูุฏ ุฅุฏุงุฑุฉ ุงูููุงุนุฏ ุงูุดุฑุทูุฉ ุจุณูููุฉ.

#### Acceptance Criteria

1. WHEN ุงูุฃุฏูู ููุชุญ ุตูุญุฉ ุงูููุชุฌ THEN ุงููุธุงู SHALL ูุนุฑุถ:
   - ูุงุฆูุฉ ุจุงูููุงุนุฏ ุงูุดุฑุทูุฉ ุงูุญุงููุฉ
   - ุฒุฑ ูุฅุถุงูุฉ ูุงุนุฏุฉ ุฌุฏูุฏุฉ
   - ุฎูุงุฑ ูุชุนุฏูู ุฃู ุญุฐู ุงูููุงุนุฏ

2. WHEN ุงูุฃุฏูู ูุถูู ูุงุนุฏุฉ THEN ุงููุธุงู SHALL ูุนุฑุถ ููุฑู ุจุณูุท:
   - ุงุฎุชุฑ ุงููุฌููุนุฉ ุงููุคุซุฑุฉ
   - ุงุฎุชุฑ ุงูุฎูุงุฑ ุงููููุนููู
   - ุญุฏุฏ ุงููููุฉ ุงูุฌุฏูุฏุฉ

3. WHEN ุงูุฃุฏูู ูุญุฐู ูุงุนุฏุฉ THEN ุงููุธุงู SHALL:
   - ูุทูุจ ุชุฃููุฏ
   - ูุญุฐู ุงููุงุนุฏุฉ
   - ููุนูุฏ ุงูุญุฏูุฏ ููููู ุงูุงูุชุฑุงุถูุฉ

### Requirement 6: ุงูุชูุงูู ูุน ุงููุธุงู ุงูุญุงูู

**User Story:** ููุทูุฑุ ุฃุฑูุฏ ุฃู ูุนูู ุงููุธุงู ุงูุฌุฏูุฏ ูุน ุงูููุฏ ุงูููุฌูุฏ.

#### Acceptance Criteria

1. WHEN ูุง ุชูุฌุฏ ููุงุนุฏ ุดุฑุทูุฉ THEN ุงููุธุงู SHALL ูุนูู ุจุงูุทุฑููุฉ ุงูุญุงููุฉ

2. WHEN ุงูููุชุฌ ูุฏูู ุจุฏูู ููุงุนุฏ THEN ุงููุธุงู SHALL ูุณุชุฎุฏู ุงูุญุฏูุฏ ุงูุงูุชุฑุงุถูุฉ

3. WHEN ูุชู ุชุญุฏูุซ ุงูููุชุฌ THEN ุงููุธุงู SHALL ูุญุงูุธ ุนูู ุงูููุงุนุฏ ุงูููุฌูุฏุฉ

---

## ๐ ูุฎุทุท ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูููุชุฑุญ

```sql
-- ุฌุฏูู ุงูููุงุนุฏ ุงูุดุฑุทูุฉ
CREATE TABLE conditional_rules (
  id TEXT PRIMARY KEY,
  product_id TEXT NOT NULL,
  dependent_group_id TEXT NOT NULL,  -- ุงููุฌููุนุฉ ุงููุชุฃุซุฑุฉ (ูุซู: flavors)
  trigger_group_id TEXT NOT NULL,    -- ุงููุฌููุนุฉ ุงููุคุซุฑุฉ (ูุซู: sizes)
  trigger_option_id TEXT NOT NULL,   -- ุงูุฎูุงุฑ ุงููููุนููู (ูุซู: large)
  new_min_selections INTEGER,        -- ุงูุญุฏ ุงูุฃุฏูู ุงูุฌุฏูุฏ
  new_max_selections INTEGER,        -- ุงูุญุฏ ุงูุฃูุตู ุงูุฌุฏูุฏ
  message_ar TEXT,                   -- ุฑุณุงูุฉ ููุนููู ุจุงูุนุฑุจูุฉ
  message_en TEXT,                   -- ุฑุณุงูุฉ ููุนููู ุจุงูุฅูุฌููุฒูุฉ
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  
  FOREIGN KEY (product_id) REFERENCES products(id),
  FOREIGN KEY (dependent_group_id) REFERENCES option_groups(id),
  FOREIGN KEY (trigger_group_id) REFERENCES option_groups(id),
  FOREIGN KEY (trigger_option_id) REFERENCES options(id)
);
```

---

## ๐ฏ ุฃูุซูุฉ ุนูููุฉ

### ูุซุงู 1: ููู ุขูุณ ูุฑูู

```
ุงูููุชุฌ: ููู ุขูุณ ูุฑูู
ุงููุงุนุฏุฉ: ุนูุฏ ุงุฎุชูุงุฑ "ุญุฌู ูุจูุฑ"ุ ููุณูุญ ุจูููุชูู ุจุฏูุงู ูู ูุงุญุฏุฉ

conditional_rules:
- product_id: "ice-cream-cone"
- dependent_group_id: "flavors"
- trigger_group_id: "sizes"
- trigger_option_id: "large"
- new_max_selections: 2
- message_ar: "ุงูุญุฌู ุงููุจูุฑ ูุณูุญ ุจูููุชูู!"
- message_en: "Large size allows 2 flavors!"
```

### ูุซุงู 2: BYO ุขูุณ ูุฑูู

```
ุงูููุชุฌ: BYO ุขูุณ ูุฑูู
ุงููุงุนุฏุฉ: ุนูุฏ ุงุฎุชูุงุฑ "ููุจ ูุจูุฑ"ุ ููุณูุญ ุจู 3 ุฅุถุงูุงุช ุจุฏูุงู ูู 2

conditional_rules:
- product_id: "byo-ice-cream"
- dependent_group_id: "dry_toppings"
- trigger_group_id: "containers"
- trigger_option_id: "large-cup"
- new_max_selections: 3
- message_ar: "ุงูููุจ ุงููุจูุฑ ูุณูุญ ุจู 3 ุฅุถุงูุงุช!"
```

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **ูุฐู ุงูููุฒุฉ ุงุฎุชูุงุฑูุฉ** - ุงููุธุงู ูุนูู ุจุฏูููุง
2. **ุงูุชูููุฐ ุชุฏุฑูุฌู** - ูุจุฏุฃ ุจุงูุญุงูุงุช ุงูุจุณูุทุฉ
3. **ุงูุชูุงูู ุฃููุงู** - ูุง ููุณุฑ ุงูููุฏ ุงูููุฌูุฏ

---

## ๐ ุงูุจุฏูู ุงูุฃุจุณุท (ููุตู ุจู ุญุงููุงู)

ุจุฏูุงู ูู ุชูููุฐ ูุธุงู ุงูููุงุนุฏ ุงูุดุฑุทูุฉ ุงููุนูุฏุ ูููู ุงุณุชุฎุฏุงู:

**ููุชุฌุงุช ูููุตูุฉ:**
- ููู ุขูุณ ูุฑูู ุนุงุฏู (ูููุฉ ูุงุญุฏุฉ)
- ููู ุขูุณ ูุฑูู ูุจูุฑ (ูููุชูู)

**ุงููุฒุงูุง:**
- ุฃุจุณุท ูู ุงูุชูููุฐ
- ุฃูุถุญ ููุนููู
- ูุง ูุญุชุงุฌ ุชุนุฏููุงุช ูู ุงูููุฏ

**ุงูุนููุจ:**
- ุชูุฑุงุฑ ูู ุงูููุชุฌุงุช
- ุตุนูุจุฉ ูู ุงูุฅุฏุงุฑุฉ ุฅุฐุง ูุซุฑุช ุงูุฃุญุฌุงู

---

## ๐ ุงูุฎูุงุตุฉ

**ูููุฑุญูุฉ ุงูุญุงููุฉ:** ุงุณุชุฎุฏู ููุชุฌุงุช ูููุตูุฉ (ุงูุญู ุงูุฃุจุณุท)

**ูููุณุชูุจู:** ูุธุงู ุงูููุงุนุฏ ุงูุดุฑุทูุฉ (ุนูุฏ ุงูุญุงุฌุฉ)
